



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://mailcow.github.io/mailcow-docs/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>mailcow documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#mailcow" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://mailcow.github.io/mailcow-docs/" title="mailcow documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                mailcow documentation
              </span>
              <span class="md-header-nav__topic">
                Information & Support
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/mailcow/mailcow/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      mailcow/mailcow
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://mailcow.github.io/mailcow-docs/" title="mailcow documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    mailcow documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/mailcow/mailcow/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      mailcow/mailcow
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Information & Support
      </label>
    
    <a href="." title="Information & Support" class="md-nav__link md-nav__link--active">
      Information & Support
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-support" title="Get support" class="md-nav__link">
    Get support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commercial-support" title="Commercial support" class="md-nav__link">
    Commercial support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#community-support" title="Community support" class="md-nav__link">
    Community support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-support" title="Get support" class="md-nav__link">
    Get support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commercial-support" title="Commercial support" class="md-nav__link">
    Commercial support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#community-support" title="Community support" class="md-nav__link">
    Community support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mailcow/mailcow-docs/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <p><img alt="mailcow" src="https://www.debinux.de/256.png" /></p>
<ul>
<li><a href="#mailcow">mailcow</a></li>
<li><a href="#get-support">Get Support</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#system-requirements">System Requirements</a></li>
<li><a href="#before-you-begin-prerequisites">Before You Begin (Prerequisites)</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#upgrade">Upgrade</a></li>
<li><a href="#uninstall">Uninstall</a></li>
</ul>
<h1 id="mailcow">mailcow<a class="headerlink" href="#mailcow" title="Permanent link">&para;</a></h1>
<p>mailcow is a mail server suite based on Dovecot, Postfix and other open source software, that provides a modern web UI for user/server administration.</p>
<p>mailcow supports <strong>Debian 8 (Jessie), Ubuntu LTS 14.04 (Trusty Tahr) and Ubuntu LTS 16.04 (Xenial Xerus)</strong></p>
<p><a href="http://imgur.com/a/lWX2V">Everybody loves screenshots (v0.14)</a></p>
<h2 id="get-support">Get support<a class="headerlink" href="#get-support" title="Permanent link">&para;</a></h2>
<h3 id="commercial-support">Commercial support<a class="headerlink" href="#commercial-support" title="Permanent link">&para;</a></h3>
<p>For commercial support contact <a href="mailto:info@servercow.de">info@servercow.de</a>.</p>
<h3 id="community-support">Community support<a class="headerlink" href="#community-support" title="Permanent link">&para;</a></h3>
<ul>
<li>IRC @ <a href="irc://irc.freenode.org:6667/mailcow">Freenode, #mailcow</a></li>
<li>Forum @ <a href="forum.mailcow.email">forum.mailcow.email</a></li>
<li>GitHub @ <a href="https://github.com/mailcow/mailcow">mailcow/mailcow-dockerized</a></li>
</ul>
<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<ul>
<li>Multi-SAN self-signed SSL certificate for all installed and supporting services<ul>
<li>Let's Encrypt optional</li>
</ul>
</li>
<li>Webserver installation<ul>
<li>Apache or Nginx (+PHP5-FPM)</li>
</ul>
</li>
<li>SQL database backend, remote database support<ul>
<li>MySQL or MariaDB</li>
</ul>
</li>
<li><strong>mailcow web UI</strong><ul>
<li>Add domains, mailboxes, aliases, set limits, enforce TLS outgoing and incoming, monitor mail statistics, change mail server settings, create/delete DKIM records and more...</li>
</ul>
</li>
<li>Postscreen activated and configured</li>
<li>STARTTLS and SMTPS support</li>
<li>The default restrictions used are a good compromise between blocking spam and avoiding false-positives</li>
<li>Incoming and outgoing spam and virus protection with FuGlu as pre-queue content filter; <a href="https://www.heinlein-support.de/">Heinlein Support</a> spamassassin rules included; Advanced ClamAV malware filters</li>
<li>Sieve/ManageSieve (default filter: move spam to "Junk" folder, move tagged mail to folder "tag")</li>
<li>Public folder support via control center</li>
<li>Per-user ACL</li>
<li>Shared Namespace</li>
<li>Quotas</li>
<li>Auto-configuration for ActiveSync + Thunderbird (and its derivates)</li>
</ul>
<p>Comes with...
<em> Roundcube
    * ManageSieve support (w/ vacation)
    * Attachment reminder (multiple locales)
    * Zip-download marked messages
or
</em> SOGo
    * Full groupware with ActiveSync and Card-/CalDAV support</p>
<h1 id="system-requirements">System Requirements<a class="headerlink" href="#system-requirements" title="Permanent link">&para;</a></h1>
<p>Please check, if your system meets the following system resources:</p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>mailcow (Roundcube)</th>
<th>mailcow (SOGo)</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>1 GHz</td>
<td>1 GHz</td>
</tr>
<tr>
<td>RAM</td>
<td>800 MiB</td>
<td>1 GiB</td>
</tr>
<tr>
<td>Disk</td>
<td>5 GiB</td>
<td>5 GiB</td>
</tr>
<tr>
<td>System Type</td>
<td>x86 or x86_64</td>
<td>x86_64</td>
</tr>
</tbody>
</table>
<h1 id="before-you-begin-prerequisites">Before You Begin: Prerequisites<a class="headerlink" href="#before-you-begin-prerequisites" title="Permanent link">&para;</a></h1>
<ul>
<li><strong>Please remove any web and mail services</strong> running on your server. I recommend using a clean Debian minimal installation.
Remember to purge Debian's default MTA Exim4:</li>
</ul>
<div class="codehilite"><pre><span></span>apt-get purge exim4*
</pre></div>


<ul>
<li>If there is a firewall, unblock the following ports for incoming connections:</li>
</ul>
<table>
<thead>
<tr>
<th>Service</th>
<th align="center">Protocol</th>
<th align="left">Port</th>
</tr>
</thead>
<tbody>
<tr>
<td>Postfix Submission</td>
<td align="center">TCP</td>
<td align="left">587</td>
</tr>
<tr>
<td>Postfix SMTPS</td>
<td align="center">TCP</td>
<td align="left">465</td>
</tr>
<tr>
<td>Postfix SMTP</td>
<td align="center">TCP</td>
<td align="left">25</td>
</tr>
<tr>
<td>Dovecot IMAP</td>
<td align="center">TCP</td>
<td align="left">143</td>
</tr>
<tr>
<td>Dovecot IMAPS</td>
<td align="center">TCP</td>
<td align="left">993</td>
</tr>
<tr>
<td>Dovecot POP3</td>
<td align="center">TCP</td>
<td align="left">110</td>
</tr>
<tr>
<td>Dovecot POP3S</td>
<td align="center">TCP</td>
<td align="left">995</td>
</tr>
<tr>
<td>Dovecot ManageSieve</td>
<td align="center">TCP</td>
<td align="left">4190</td>
</tr>
<tr>
<td>HTTP(S)</td>
<td align="center">TCP</td>
<td align="left">80/443</td>
</tr>
</tbody>
</table>
<ul>
<li>Setup DNS records:</li>
</ul>
<p>Obviously you will need an A and/or AAAA record <code>sys_hostname.sys_domain</code> pointing to your IP address and a valid MX record.
Let's Encrypt does not assign certificates when it cannot determine a valid IPv4 address.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="center">Value</th>
<th align="left">Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sys_hostname.sys_domain</code></td>
<td align="center">A/AAAA</td>
<td align="center">IPv4/6</td>
<td align="left">any</td>
</tr>
<tr>
<td><code>sys_domain</code></td>
<td align="center">MX</td>
<td align="center"><code>sys_hostname.sys_domain</code></td>
<td align="left">25</td>
</tr>
</tbody>
</table>
<p>Optional: Auto-configuration services for Thunderbird (and derivates) + ActiveSync.
You do not need to setup <code>autodiscover</code> when not using SOGo with ActiveSync.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="center">Value</th>
<th align="left">Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td>autoconfig.<code>sys_domain</code></td>
<td align="center">A/AAAA</td>
<td align="center">IPv4/6</td>
<td align="left">any</td>
</tr>
<tr>
<td>autodiscover.<code>sys_domain</code></td>
<td align="center">A/AAAA</td>
<td align="center">IPv4/6</td>
<td align="left">any</td>
</tr>
</tbody>
</table>
<p><strong>Hint:</strong> ActiveSync auto-discovery is setup to configure desktop clients with IMAP!</p>
<p>Further DNS records for SPF and DKIM are recommended. These entries will raise trust in your mailserver, reduce abuse of your domain name and increase authenticity.</p>
<p>Find more details about mailcow DNS entries and SPF/DKIM related configuration in our wiki article on <a href="https://github.com/andryyy/mailcow/wiki/DNS-records">DNS Records</a>.</p>
<ul>
<li>Next it is important that you <strong>do not use Google DNS</strong> or another public DNS which is known to be blocked by DNS-based Blackhole List (DNSBL) providers.</li>
</ul>
<p>I recommend PowerDNS Recursor as a local recursor with DNSSEC capabilities. See <a href="https://repo.powerdns.com/">https://repo.powerdns.com/</a>.
Though any non-blocked or rate limited DNS server your ISP gave you <em>should</em> be fine.</p>
<h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h1>
<p><strong>Please run all commands as root</strong></p>
<p><strong>Download a stable release</strong></p>
<p>Download mailcow to whichever directory (using ~/build here).
Replace "v0.x" with the tag of the latest release: <a href="https://github.com/andryyy/mailcow/releases/latest">https://github.com/andryyy/mailcow/releases/latest</a></p>
<div class="codehilite"><pre><span></span>mkdir ~/build ; cd ~/build
wget -O - https://github.com/andryyy/mailcow/archive/v0.x.tar.gz | tar xfz -
cd mailcow-*
</pre></div>


<p><strong>Now edit the file "configuration" to fit your needs!</strong></p>
<div class="codehilite"><pre><span></span>nano mailcow.config
</pre></div>


<ul>
<li><strong>sys_hostname</strong> - Hostname without domain</li>
<li><strong>sys_domain</strong> - Domain name. "$sys_hostname.$sys_domain" equals to FQDN.</li>
</ul>
<p>:exclamation: Please make sure your FQDN resolves correctly!</p>
<ul>
<li><strong>sys_timezone</strong> - The timezone must be defined in a valid format (Europe/Berlin, America/New_York etc.)</li>
<li><strong>use_lets_encrypt</strong> - Tries to obtain a certificate from Let's Encrypt CA. If it fails, it can be retried by calling <code>./install.sh -s</code>. Installs a cronjob to renew the certificate but keeps the same key.</li>
<li><strong>httpd_platform</strong> - Select wether to use Nginx ("nginx") or Apache2 ("apache2"). Nginx is default.</li>
<li><strong>mailing_platform</strong> - Can be "sogo" or "roundcube"</li>
<li><strong>my_dbhost</strong> - ADVANCED: Leave as-is ("localhost") for a local database installation. Anything but "localhost" or "127.0.0.1" is recognized as a remote installation.</li>
<li><strong>my_usemariadb</strong> - Use MariaDB instead of MySQL. Only valid for local databases. Installer stops when MariaDB is detected, but MySQL selected - and vice versa.</li>
<li><strong>my_mailcowdb, my_mailcowuser, my_mailcowpass</strong> - SQL database name, username and password for use with Postfix. <strong>You can use the default values.</strong></li>
<li><strong>my_rcdb, my_rcuser, my_rcpass</strong> - SQL database name, username and password for Roundcube. <strong>You can use the default values.</strong></li>
<li><strong>my_rootpw</strong> - SQL root password is generated automatically by default. You can define a complex password here if you want to. <em>Set to your current root password to use an existing SQL instance</em>.</li>
<li><strong>mailcow_admin_user and mailcow_admin_pass</strong> - mailcow administrator. Password policy: minimum length 8 chars, must contain uppercase and lowercase letters and at least 2 digits. <strong>You can use the default values</strong>.</li>
<li><strong>inst_debug</strong> - Sets Bash mode -x</li>
<li><strong>inst_confirm_proceed</strong> - Skip "Press any key to continue" dialogs by setting this to "no"</li>
</ul>
<p><strong>Empty configuration values are invalid!</strong></p>
<p>You are ready to start the script:</p>
<div class="codehilite"><pre><span></span>./install.sh
</pre></div>


<p>Just be patient and confirm every step by pressing [ENTER] or [CTRL-C] to interrupt the installation.
If you run into problems, try to locate the error with "inst_debug" enabled in your configuration.
Please contact me when you need help or found a bug.</p>
<p>More debugging is about to come. Though everything should work as intended.</p>
<p>After the installation, visit your dashboard @ <strong><a href="https://hostname.example.com">https://hostname.example.com</a></strong>, use the logged credentials in <code>./installer.log</code></p>
<p>Remember to create an alias or a mailbox for <code>postmaster</code>.</p>
<p>Again, please check you setup all DNS records accordingly.</p>
<h2 id="web-ui-configuration-variables">Web UI configuration variables<a class="headerlink" href="#web-ui-configuration-variables" title="Permanent link">&para;</a></h2>
<p>Some settings can be changed by overwriting defaults of <code>/var/www/mail/inc/vars.inc.php</code> in <code>/var/www/mail/inc/vars.local.inc.php</code>.</p>
<p>Changes to <code>/var/www/mail/inc/vars.local.inc.php</code> will not be overwritten when upgrading mailcow.</p>
<h2 id="_1"><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h1 id="upgrade">Upgrade<a class="headerlink" href="#upgrade" title="Permanent link">&para;</a></h1>
<p><strong>Please run all commands as root</strong></p>
<p>The mailcow configuration file (mailcow.config) will not be read, so there is no need to adjust it in any way before upgrading.</p>
<p>To start the upgrade, run the following command:</p>
<div class="codehilite"><pre><span></span>./install.sh -u
</pre></div>


<p><strong>Please double check the detected FQDN!</strong></p>
<p>When autodetection of your hostname and/or domain name fails, use the <code>-H</code> parameter to overwrite the hostname and/or <code>-D</code> to overwrite the domain name:</p>
<div class="codehilite"><pre><span></span># FQDN: mx.example.org
./install -u -H mx -D example.org
</pre></div>


<h1 id="uninstall">Uninstall<a class="headerlink" href="#uninstall" title="Permanent link">&para;</a></h1>
<p>Please remove the components you do not need manually. mailcow installs components that may be used by other software on your system.
mailcow is an installer that installs and configures software, so there is no routine to remove itself.</p>
<p><strong>A list of by apt-get installed components</strong></p>
<div class="codehilite"><pre><span></span># System tools
dnsutils sudo zip bzip2 unzip unrar-free curl openssl file bsd-mailx

# Core components
# <span class="cp">${</span><span class="n">OPENJDK</span><span class="cp">}</span> is either &quot;openjdk-7&quot; or &quot;openjdk-9&quot;
rrdtool mailgraph fcgiwrap spawn-fcgi python-setuptools libmail-spf-perl libmail-dkim-perl mailutils pyzor razor postfix postfix-mysql postfix-pcre postgrey pflogsumm spamassassin spamc opendkim opendkim-tools clamav-daemon python-magic liblockfile-simple-perl libdbi-perl libmime-base64-urlsafe-perl libtest-tempdir-perl liblogger-syslog-perl <span class="cp">${</span><span class="n">OPENJDK</span><span class="cp">}</span>-jre-headless libcurl4-openssl-dev libexpat1-dev solr-jetty

# PHP components
# <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span> is either PHP or PHP5
php-auth-sasl php-http-request php-mail php-mail-mime php-mail-mimedecode php-net-dime php-net-smtp php-net-socket php-net-url php-pear php-soap <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span> <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-cli <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-common <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-curl <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-gd <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-imap <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-intl <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-xsl libawl-php <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-mcrypt <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-mysql <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-xmlrpc

# Database components
mariadb-client mariadb-server
# or...
mysql-client mysql-server

# Webserver components
# <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span> is either PHP or PHP5
apache2 apache2-utils libapache2-mod-<span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>
# or...
nginx-extras <span class="cp">${</span><span class="n">PHP</span><span class="cp">}</span>-fpm

# Dovecot components
dovecot-common dovecot-core dovecot-imapd dovecot-lmtpd dovecot-managesieved dovecot-sieve dovecot-mysql dovecot-pop3d dovecot-solr

# SOGo
# ALSO: rm /etc/apt/sources.list.d/sogo.list
sogo sogo-activesync libwbxml2-0 memcached
</pre></div>


<p><strong>System modifications</strong></p>
<div class="codehilite"><pre><span></span># Cronjobs
rm /etc/cron.daily/mc_clean_spam_aliases /etc/cron.daily/mailcow-clean-spam-aliases /etc/cron.daily/dovemaint /etc/cron.d/solrmaint /etc/cron.daily/spamlearn /etc/cron.daily/spamassassin_heinlein /etc/cron.weekly/le-renew

# Sudo
rm /etc/sudoers.d/mailcow

# Executables
rm /usr/local/sbin/mailcow-reset-admin /usr/local/sbin/mailcow-dkim-tool /usr/local/sbin/mailcow-set-message-limit /usr/local/sbin/mailcow-renew-pflogsumm /usr/local/sbin/mc_pflog_renew /usr/local/sbin/mc_msg_size /usr/local/sbin/mc_dkim_ctrl /usr/local/sbin/mc_resetadmin
</pre></div>


<p><strong>Manually installed components and miscellaneous</strong></p>
<div class="codehilite"><pre><span></span># Databases
# Besides aboves packages, you may want to drop the mailcow and, if installed, Roundcube database. SOGo uses the mailcow database.
DROP DATABASE $mailcowdb;
DROP DATABASE $roundcubedb;

# Let&#39;s Encrypt
rm -r /opt/letsencrypt-sh/

# FuGlu
systemctl disable fuglu
rm -rf /usr/local/lib/python2.7/dist-packages/fuglu*
update-rc.d -f fuglu remove
userdel fuglu
# FuGlu dependencies
python-sqlalchemy python-beautifulsoup python-mysqldb
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 André Peters
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="./assets/fonts/font-awesome.css">
    
      <a href="http://mailcow.email" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/mailcow" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-92608422-4","mailcow.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>